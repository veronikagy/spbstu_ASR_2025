@startuml

' Настройка внешнего вида
skinparam packageStyle rectangle
skinparam linetype ortho

' Классы системы
class Библиотека {
  + название : String
  + адрес : String
  + телефон : String
  + email : String
  + добавитьКнигу(книга : Книга) : void
  + удалитьКнигу(isbn : String) : boolean
  + найтиКнигуПоISBN(isbn : String) : Книга
  + найтиКнигиПоАвтору(автор : String) : List<Книга>
  + найтиКнигиПоНазванию(название : String) : List<Книга>
}

class Книга {
  + isbn : String
  + название : String
  + автор : String
  + годИздания : int
  + жанр : String
  + количествоСтраниц : int
  + издательство : String
  + доступен : boolean
}

class Читатель {
  + id : String
  + фамилия : String
  + имя : String
  + отчество : String
  + датаРождения : LocalDate
  + адрес : String
  + телефон : String
  + email : String
  + статус : СтатусЧитателя
  + взятьКнигу(книга : Книга) : boolean
  + вернутьКнигу(книга : Книга) : boolean
  + получитьСписокВыданныхКниг() : List<Выдача>
}

class Выдача {
  + id : String
  + книга : Книга
  + читатель : Читатель
  + датаВыдачи : LocalDate
  + срокВозврата : LocalDate
  + фактическаяДатаВозврата : LocalDate
  + штраф : double
  + продлитьСрок() : boolean
  + рассчитатьШтраф() : double
}

enum СтатусЧитателя {
  АКТИВНЫЙ
  ЗАБЛОКИРОВАН
  В_ОТПУСКЕ
}

class Сотрудник {
  + id : String
  + фамилия : String
  + имя : String
  + отчество : String
  + должность : String
  + зарплата : double
  + обработатьЗаявкуНаВыдачу(заявка : ЗаявкаНаВыдачу) : boolean
  + обработатьВозврат(выдача : Выдача) : boolean
}

class ЗаявкаНаВыдачу {
  + id : String
  + читатель : Читатель
  + книга : Книга
  + датаЗаявки : LocalDate
  + статус : СтатусЗаявки
  + комментарий : String
}

enum СтатусЗаявки {
  ОЖИДАЕТ
  ОДОБРЕНО
  ОТКЛОНЕН
  ВЫДАНО
}

' Связи между классами
Библиотека --o Книга : содержит
Библиотека --o Читатель : обслуживает
Библиотека --o Сотрудник : включает
Библиотека --o Выдача : управляет

Читатель --o Выдача : имеет
Читатель --o ЗаявкаНаВыдачу : подаёт

Сотрудник --o ЗаявкаНаВыдачу : обрабатывает
Сотрудник --o Выдача : оформляет

Выдача --* Книга : ссылается на
Выдача --* Читатель : ссылается на

ЗаявкаНаВыдачу --* Книга : запрашивает
ЗаявкаНаВыдача --* Читатель : от читателя

' Примечания
note right of Библиотека
  Основной класс системы.
  Управляет всеми сущностями.
end note

note right of Выдача
  Фиксирует факт выдачи книги
  читателю на определённый срок.
end note

@enduml

