@startuml

' Классы и иерархия наследования
class Человек {
  + String имя
  + String email
  + String телефон
  + void обновитьКонтакт()
}

class Читатель extends Человек {
  + int номерЧитателя
  + List<ВыдачаКниги> текущиеВыдачи
  + void взятьКнигу(Книга книга)
  + void вернутьКнигу(ВыдачаКниги выдача)
  + void забронироватьКнигу(Книга книга)
}

class Библиотекарь extends Человек {
  + int idСотрудника
  + void зарегистрироватьЧитателя(Читатель читатель)
  + void обработатьВыдачу(ВыдачаКниги выдача)
  + void обработатьВозврат(ВыдачаКниги выдача)
}

class Администратор extends Библиотекарь {
  + void управлятьКаталогом()
  + void формироватьОтчёт()
  + void начислитьШтраф(Штраф штраф)
}

' Основные классы системы
class Книга {
  + String ISBN
  + String название
  + String автор
  + String жанр
  + boolean доступна
  + int количествоЭкземпляров
  + void обновитьСтатус()
}

class ВыдачаКниги {
  + LocalDate датаВыдачи
  + LocalDate датаВозврата
  + boolean возвращена
  + void продлитьСрок()
  + void отметитьВозврат()
}

class Штраф {
  + LocalDate датаНачисления
  + double сумма
  + String причина
  + boolean оплачен
  + void оплатить()
}

class Бронирование {
  + LocalDate датаБронирования
  + LocalDate срокДействия
  + boolean подтверждено
  + void подтвердить()
  + void отменить()
}

class Отчёт {
  + LocalDate период
  + String типОтчёта
  + Map<String, Object> данные
  + void сгенерировать()
  + void экспортировать()
}

' Ассоциации и связи между классами
Читатель --right--> ВыдачаКниги : имеет текущие выдачи
Читатель --right--> Бронирование : имеет бронирования

Библиотекарь --right--> ВыдачаКниги : обрабатывает выдачи
Библиотекарь --right--> Читатель : регистрирует читателей

Администратор --right--> Штраф : начисляет штрафы
Администратор --right--> Отчёт : формирует отчёты

ВыдачаКниги --right--> Книга : включает книгу
ВыдачаКниги --right--> Читатель : выдаётся читателю
ВыдачаКниги --right--> Штраф : может привести к штрафу

Бронирование --right--> Книга : относится к книге
Бронирование --right--> Читатель : создано читателем

Отчёт --right--> ВыдачаКниги : включает данные о выдачах
Отчёт --right--> Штраф : включает данные о штрафах
Отчёт --right--> Книга : включает данные о книгах

' Композиция (отчёт состоит из записей)
Отчёт *--right-- ЗаписьОтчёта : содержит записи
class ЗаписьОтчёта {
  + String параметр
  + Object значение
}

@enduml

